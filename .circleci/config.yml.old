version: 2.0
jobs:
  build:
    docker:
      - image: circleci/ruby:2.4.2-jessie-node
    steps:
      - checkout
      - setup_remote_docker
      - run: $(aws ecr get-login --no-include-email --region ap-southeast-2)
      - run: sudo docker -t build .
      - run: docker tag callcarisbatch:latest 288871573946.dkr.ecr.ap-southeast-2.amazonaws.com/callcarisbatch:latest
      - run: docker push 288871573946.dkr.ecr.ap-southeast-2.amazonaws.com/callcarisbatch:latest

      #- run: echo "Hello World"