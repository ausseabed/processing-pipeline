{
    "StartAt": "Add Overlays and Tiling",
    "States": {
        "Add Overlays and Tiling": {
            "Type": "Task",
            "Resource": "arn:aws:states:::ecs:runTask.sync",
            "ResultPath": "$.previous_step__result",
            "Parameters": {
                "LaunchType": "FARGATE",
                "Cluster": "${aws_ecs_cluster_arn}",
                "TaskDefinition": "${aws_ecs_task_definition_gdal_arn}",
                "NetworkConfiguration": {
                    "AwsvpcConfiguration": {
                        "AssignPublicIp": "ENABLED",
                        "SecurityGroups": [
                            "${aws_ecs_task_definition_caris_sg}"
                        ],
                        "Subnets": [
                            "${aws_ecs_task_definition_caris_subnet}"
                        ]
                    }
                },
                "Overrides": {
                    "ContainerOverrides": [
                        {
                            "Name": "app",
                            "Command": ["./overlays.sh"],
                            "Environment": [
                                {
                                    "Name": "S3_SRC_TIF",
                                    "Value.$": "$.s3_src_tif"
                                },
                                {
                                    "Name": "S3_DEST_TIF",
                                    "Value.$": "$.s3_dest_tif"
                                }
                            ]
                        }
                    ]
                }
            },
            "End":true,
            "TimeoutSeconds": 60000
        }
    }
}